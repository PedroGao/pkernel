# 内核线程的实现

内核线程是一个独立的逻辑流，拥有独立的栈空间，却不拥有其它资源，与其它资源共享全局数据。

Intel 的x 86CPU 提供任务切换机制是使用 TSS 段进行切换, 这么做比较繁琐且效率较
低, 现代的 OS 都不会完全采用硬件切换机制。本章所阐述的任务切换只发生在内核态, 不
涉及特权级的转移过程, 所以可以完全由硬件实现。而且这种实现用在用户级的线程库中
亦可, 大家有兴趣的话可以仿照这个思路实现用户级线程库。

任务的切换必然会涉及到现场的保护与恢复，所以需要一个数据结构来保存上下文信息。

这个数据结构会放置一些任务相关的信息并且以链表之类的方式进行组织，这个结构被称为
`PCB（Process Control Block）` 或者 `TCB(Task Control Block)` 。

仿照 linux，这个任务的结构体也称之为 `task` 。

涉及的核心点有：

* 进程 task 和线程之间的区别和联系。
* 进程调度的实现，时间片的轮转。
* 进程状态和进程控制块 PCB 的实现。
* 线程切换，需要保存上下文，寄存器值的保存。

## 总结

进程和线程的实现与区别其实在这个教程里面描述的比较模糊，因此未作过多的解读，后续再阅读 <<深入理解操作系统>> 和<<linux内核实现>> 再去探索一下~
